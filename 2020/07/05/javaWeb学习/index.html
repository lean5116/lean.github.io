<!DOCTYPE html><html lang="zh-Hans" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>javaWeb学习  | LeanBlog</title><meta name="description" content="1、javaWeb1、基本概念1.1 、静态web  1.2、动态web  2、Tomcat2.1、解决Tomcat控制台乱码在config目录下的logging.properties 添加如下配置 1java.util.logging.ConsoleHandler.encoding &#x3D; GBK    2.2、端口修改在config目录下的server.xml中修改   123&lt;Connec"><meta name="author" content="Lean"><meta name="copyright" content="Lean"><meta name="format-detection" content="telephone=no"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="http://yoursite.com/2020/07/05/javaWeb%E5%AD%A6%E4%B9%A0/"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//fonts.googleapis.com" crossorigin="crossorigin"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><meta property="og:type" content="article"><meta property="og:title" content="javaWeb学习 "><meta property="og:url" content="http://yoursite.com/2020/07/05/javaWeb%E5%AD%A6%E4%B9%A0/"><meta property="og:site_name" content="LeanBlog"><meta property="og:description" content="1、javaWeb1、基本概念1.1 、静态web  1.2、动态web  2、Tomcat2.1、解决Tomcat控制台乱码在config目录下的logging.properties 添加如下配置 1java.util.logging.ConsoleHandler.encoding &#x3D; GBK    2.2、端口修改在config目录下的server.xml中修改   123&lt;Connec"><meta property="og:image" content="http://yoursite.com/img/cover6.jpg"><meta property="article:published_time" content="2020-07-05T04:27:14.000Z"><meta property="article:modified_time" content="2020-07-06T00:22:13.242Z"><meta name="twitter:card" content="summary"><script>var activateDarkMode = function () {
  document.documentElement.setAttribute('data-theme', 'dark')
  if (document.querySelector('meta[name="theme-color"]') !== null) {
    document.querySelector('meta[name="theme-color"]').setAttribute('content', '#000')
  }
}
var activateLightMode = function () {
  document.documentElement.setAttribute('data-theme', 'light')
  if (document.querySelector('meta[name="theme-color"]') !== null) {
    document.querySelector('meta[name="theme-color"]').setAttribute('content', '#fff')
  }
}

var getCookies = function (name) {
  const value = `; ${document.cookie}`
  const parts = value.split(`; ${name}=`)
  if (parts.length === 2) return parts.pop().split(';').shift()
}

var autoChangeMode = 'false'
var t = getCookies('theme')
if (autoChangeMode === '1') {
  var isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
  var isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
  var isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
  var hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

  if (t === undefined) {
    if (isLightMode) activateLightMode()
    else if (isDarkMode) activateDarkMode()
    else if (isNotSpecified || hasNoSupport) {
      console.log('You specified no preference for a color scheme or your browser does not support it. I Schedule dark mode during night time.')
      var now = new Date()
      var hour = now.getHours()
      var isNight = hour <= 6 || hour >= 18
      isNight ? activateDarkMode() : activateLightMode()
    }
    window.matchMedia('(prefers-color-scheme: dark)').addListener(function (e) {
      if (Cookies.get('theme') === undefined) {
        e.matches ? activateDarkMode() : activateLightMode()
      }
    })
  } else if (t === 'light') activateLightMode()
  else activateDarkMode()
} else if (autoChangeMode === '2') {
  now = new Date()
  hour = now.getHours()
  isNight = hour <= 6 || hour >= 18
  if (t === undefined) isNight ? activateDarkMode() : activateLightMode()
  else if (t === 'light') activateLightMode()
  else activateDarkMode()
} else {
  if (t === 'dark') activateDarkMode()
  else if (t === 'light') activateLightMode()
}</script><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css"><link rel="prev" title="Mybatis官方文档" href="http://yoursite.com/2020/07/05/Mybatis%E5%AE%98%E6%96%B9%E6%96%87%E6%A1%A3/"><link rel="next" title="Vue Sample" href="http://yoursite.com/2020/07/02/Vue-Sample/"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web&amp;display=swap"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"簡"},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  bookmark: {
    message_prev: '按',
    message_next: '键将本页加入书签'
  },
  runtime_unit: '天',
  runtime: false,
  copyright: undefined,
  ClickShowText: undefined,
  medium_zoom: false,
  fancybox: true,
  Snackbar: undefined,
  justifiedGallery: {
    js: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
    css: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
  },
  baiduPush: false,
  highlightCopy: true,
  highlightLang: true,
  isPhotoFigcaption: false,
  islazyload: true,
  isanchor: false    
}</script><script>var GLOBAL_CONFIG_SITE = { 
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isSidebar: true
  }</script><noscript><style>
#nav {
  opacity: 1
}
.justified-gallery img{
  opacity: 1
}
</style></noscript><meta name="generator" content="Hexo 4.2.1"></head><body><div id="mobile-sidebar"><div id="menu_mask"></div><div id="mobile-sidebar-menus"><div class="mobile_author_icon"><img class="avatar-img" src="/img/avatar.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="mobile_post_data"><div class="mobile_data_item is-center"><div class="mobile_data_link"><a href="/archives/"><div class="headline">文章</div><div class="length_num">8</div></a></div></div><div class="mobile_data_item is-center">     <div class="mobile_data_link"><a href="/categories/"><div class="headline">分类</div><div class="length_num">4</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page"><i class="fa-fw fas fa-list"></i><span> List</span><i class="fas fa-chevron-down menus-expand"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/music/"><i class="fa-fw fas fa-music"></i><span> Music</span></a></li><li><a class="site-page" href="/movies/"><i class="fa-fw fas fa-video"></i><span> Movie</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> Link</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div></div></div><i class="fas fa-arrow-right on" id="toggle-sidebar"></i><div id="sidebar"><div class="sidebar-toc"><div class="sidebar-toc__title">目录</div><div class="sidebar-toc__progress"><span class="progress-notice">你已经读了</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar">     </div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#1、javaWeb"><span class="toc-number">1.</span> <span class="toc-text">1、javaWeb</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1、基本概念"><span class="toc-number">1.1.</span> <span class="toc-text">1、基本概念</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-1-、静态web"><span class="toc-number">1.1.1.</span> <span class="toc-text">1.1 、静态web</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-2、动态web"><span class="toc-number">1.1.2.</span> <span class="toc-text">1.2、动态web</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2、Tomcat"><span class="toc-number">1.2.</span> <span class="toc-text">2、Tomcat</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1、解决Tomcat控制台乱码"><span class="toc-number">1.2.1.</span> <span class="toc-text">2.1、解决Tomcat控制台乱码</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2、端口修改"><span class="toc-number">1.2.2.</span> <span class="toc-text">2.2、端口修改</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-3、服务器访问逻辑"><span class="toc-number">1.2.3.</span> <span class="toc-text">2.3、服务器访问逻辑</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-4、环境变量"><span class="toc-number">1.2.4.</span> <span class="toc-text">2.4、环境变量</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-5、网页发布"><span class="toc-number">1.2.5.</span> <span class="toc-text">2.5、网页发布</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3、Http"><span class="toc-number">1.3.</span> <span class="toc-text">3、Http</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1、Http的两个时代"><span class="toc-number">1.3.1.</span> <span class="toc-text">3.1、Http的两个时代</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2、Http请求与响应"><span class="toc-number">1.3.2.</span> <span class="toc-text">3.2、Http请求与响应</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-3、多种请求方式"><span class="toc-number">1.3.3.</span> <span class="toc-text">3.3、多种请求方式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-4、Http状态码"><span class="toc-number">1.3.4.</span> <span class="toc-text">3.4、Http状态码</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-5、restful请求规范"><span class="toc-number">1.3.5.</span> <span class="toc-text">3.5、restful请求规范</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4、maven"><span class="toc-number">1.4.</span> <span class="toc-text">4、maven</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5、servlet"><span class="toc-number">1.5.</span> <span class="toc-text">5、servlet</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#5-1、配置"><span class="toc-number">1.5.1.</span> <span class="toc-text">5.1、配置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-2、HelloServlet"><span class="toc-number">1.5.2.</span> <span class="toc-text">5.2、HelloServlet</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-3、Servlet原理"><span class="toc-number">1.5.3.</span> <span class="toc-text">5.3、Servlet原理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-4、context公共容器"><span class="toc-number">1.5.4.</span> <span class="toc-text">5.4、context公共容器</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6、servlet"><span class="toc-number">1.6.</span> <span class="toc-text">6、servlet</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#6-1、Servlet初始化参数"><span class="toc-number">1.6.1.</span> <span class="toc-text">6.1、Servlet初始化参数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-2、读取配置文件"><span class="toc-number">1.6.2.</span> <span class="toc-text">6.2、读取配置文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-3、请求转发与重定向"><span class="toc-number">1.6.3.</span> <span class="toc-text">6.3、请求转发与重定向</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7、LoginServlet"><span class="toc-number">1.7.</span> <span class="toc-text">7、LoginServlet</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8、Servlet文件下载"><span class="toc-number">1.8.</span> <span class="toc-text">8、Servlet文件下载</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9、session-与cookies"><span class="toc-number">1.9.</span> <span class="toc-text">9、session 与cookies</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#9-1、cookies"><span class="toc-number">1.9.1.</span> <span class="toc-text">9.1、cookies</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-2、Session"><span class="toc-number">1.9.2.</span> <span class="toc-text">9.2、Session</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#10、JSP"><span class="toc-number">1.10.</span> <span class="toc-text">10、JSP</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#10-1、JSP原理"><span class="toc-number">1.10.1.</span> <span class="toc-text">10.1、JSP原理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-2、-JSP表达式"><span class="toc-number">1.10.2.</span> <span class="toc-text">10.2、 JSP表达式</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#10-2-1、内置对象"><span class="toc-number">1.10.2.1.</span> <span class="toc-text">10.2.1、内置对象</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#10-2-2、jsptag"><span class="toc-number">1.10.2.2.</span> <span class="toc-text">10.2.2、jsptag</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#10-2-3、javabean"><span class="toc-number">1.10.2.3.</span> <span class="toc-text">10.2.3、javabean</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#10-2-4、casewhen"><span class="toc-number">1.10.2.4.</span> <span class="toc-text">10.2.4、casewhen</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#10-2-5、if"><span class="toc-number">1.10.2.5.</span> <span class="toc-text">10.2.5、if</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#10-2-6-foreach"><span class="toc-number">1.10.2.6.</span> <span class="toc-text">10.2.6 foreach</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#11、fiter过滤器"><span class="toc-number">1.11.</span> <span class="toc-text">11、fiter过滤器</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#12、监听器"><span class="toc-number">1.12.</span> <span class="toc-text">12、监听器</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#13、JDBC"><span class="toc-number">1.13.</span> <span class="toc-text">13、JDBC</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#14、文件上传"><span class="toc-number">1.14.</span> <span class="toc-text">14、文件上传</span></a></li></ol></li></ol></div></div></div><div id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url(/img/cover6.jpg)"><nav id="nav"><span class="pull-left" id="blog_name"><a class="blog_title" id="site-name" href="/">LeanBlog</a></span><span class="pull-right menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page"><i class="fa-fw fas fa-list"></i><span> List</span><i class="fas fa-chevron-down menus-expand"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/music/"><i class="fa-fw fas fa-music"></i><span> Music</span></a></li><li><a class="site-page" href="/movies/"><i class="fa-fw fas fa-video"></i><span> Movie</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> Link</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div><span class="toggle-menu close"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></span></span></nav><div id="post-info"><div id="post-title"><div class="posttitle">javaWeb学习 </div></div><div id="post-meta"><div class="meta-firstline"><time class="post-meta__date"><span class="post-meta__date-created" title="发表于 2020-07-05 12:27:14"><i class="far fa-calendar-alt fa-fw"></i> 发表于 2020-07-05</span><span class="post-meta__separator">|</span><span class="post-meta__date-updated" title="更新于 2020-07-06 08:22:13"><i class="fas fa-history fa-fw"></i> 更新于 2020-07-06</span></time><span class="post-meta__categories"><span class="post-meta__separator">|</span><i class="fas fa-inbox fa-fw post-meta__icon"></i><a class="post-meta__categories" href="/categories/JavaWeb%E5%9F%BA%E7%A1%80/">JavaWeb基础</a></span></div><div class="meta-secondline"> </div><div class="meta-thirdline"><span class="post-meta-pv-cv"><i class="far fa-eye fa-fw post-meta__icon"></i><span>阅读量:</span><span id="busuanzi_value_page_pv"></span></span><span class="post-meta-commentcount"></span></div></div></div></header><main class="layout_post" id="content-inner"><article id="post"><div class="post-content" id="article-container"><h1 id="1、javaWeb"><a href="#1、javaWeb" class="headerlink" title="1、javaWeb"></a>1、javaWeb</h1><h2 id="1、基本概念"><a href="#1、基本概念" class="headerlink" title="1、基本概念"></a>1、基本概念</h2><h3 id="1-1-、静态web"><a href="#1-1-、静态web" class="headerlink" title="1.1 、静态web"></a>1.1 、静态web</h3><img src= "/img/loading.gif" data-src="/2020/07/05/javaWeb%E5%AD%A6%E4%B9%A0/image-20200705123924108.png" class>

<h3 id="1-2、动态web"><a href="#1-2、动态web" class="headerlink" title="1.2、动态web"></a>1.2、动态web</h3><img src= "/img/loading.gif" data-src="/2020/07/05/javaWeb%E5%AD%A6%E4%B9%A0/image-20200705124038350.png" class>

<h2 id="2、Tomcat"><a href="#2、Tomcat" class="headerlink" title="2、Tomcat"></a>2、Tomcat</h2><h3 id="2-1、解决Tomcat控制台乱码"><a href="#2-1、解决Tomcat控制台乱码" class="headerlink" title="2.1、解决Tomcat控制台乱码"></a>2.1、解决Tomcat控制台乱码</h3><p>在config目录下的logging.properties 添加如下配置</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">java.util.logging.ConsoleHandler.encoding</span> = <span class="string">GBK</span></span><br></pre></td></tr></table></figure>

<img src= "/img/loading.gif" data-src="/2020/07/05/javaWeb%E5%AD%A6%E4%B9%A0/image-20200705125029985.png" class>

<h3 id="2-2、端口修改"><a href="#2-2、端口修改" class="headerlink" title="2.2、端口修改"></a>2.2、端口修改</h3><p>在config目录下的server.xml中修改</p>
<img src= "/img/loading.gif" data-src="/2020/07/05/javaWeb%E5%AD%A6%E4%B9%A0/image-20200705125245846.png" class>

<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">Connector</span> <span class="attr">port</span>=<span class="string">"8080"</span> <span class="attr">protocol</span>=<span class="string">"HTTP/1.1"</span></span></span><br><span class="line"><span class="tag">              <span class="attr">connectionTimeout</span>=<span class="string">"20000"</span></span></span><br><span class="line"><span class="tag">              <span class="attr">redirectPort</span>=<span class="string">"8443"</span> <span class="attr">URIEncoding</span>=<span class="string">"utf-8"</span>/&gt;</span></span><br></pre></td></tr></table></figure>

<p>也可修改hostname 为自定义名称</p>
<img src= "/img/loading.gif" data-src="/2020/07/05/javaWeb%E5%AD%A6%E4%B9%A0/image-20200705125336305.png" class>

<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">Host</span> <span class="attr">name</span>=<span class="string">"localhost"</span>  <span class="attr">appBase</span>=<span class="string">"webapps"</span></span></span><br><span class="line"><span class="tag">          <span class="attr">unpackWARs</span>=<span class="string">"true"</span> <span class="attr">autoDeploy</span>=<span class="string">"true"</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="2-3、服务器访问逻辑"><a href="#2-3、服务器访问逻辑" class="headerlink" title="2.3、服务器访问逻辑"></a>2.3、服务器访问逻辑</h3><img src= "/img/loading.gif" data-src="/2020/07/05/javaWeb%E5%AD%A6%E4%B9%A0/image-20200705125620055.png" class>

<h3 id="2-4、环境变量"><a href="#2-4、环境变量" class="headerlink" title="2.4、环境变量"></a>2.4、环境变量</h3><p>tomcat环境变量还是不要配比较好</p>
<h3 id="2-5、网页发布"><a href="#2-5、网页发布" class="headerlink" title="2.5、网页发布"></a>2.5、网页发布</h3><p>目录下的webapps目录</p>
<img src= "/img/loading.gif" data-src="/2020/07/05/javaWeb%E5%AD%A6%E4%B9%A0/image-20200705125911826.png" class>

<h2 id="3、Http"><a href="#3、Http" class="headerlink" title="3、Http"></a>3、Http</h2><h3 id="3-1、Http的两个时代"><a href="#3-1、Http的两个时代" class="headerlink" title="3.1、Http的两个时代"></a>3.1、Http的两个时代</h3><p>Http1.0：</p>
<p>​    http/1.0 ：客户端与服务一次链接只能获取一个资源</p>
<p>Http2.0：</p>
<p>​    http/1.1</p>
<h3 id="3-2、Http请求与响应"><a href="#3-2、Http请求与响应" class="headerlink" title="3.2、Http请求与响应"></a>3.2、Http请求与响应</h3><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">请求</span> <span class="string">URL: https://www.baidu.com/</span></span><br><span class="line"><span class="meta">请求方法</span>: <span class="string">GET</span></span><br><span class="line"><span class="meta">状态代码</span>: <span class="string">200 OK</span></span><br><span class="line"><span class="meta">远程地址</span>: <span class="string">180.101.49.11:443</span></span><br><span class="line"><span class="meta">引用站点策略</span>: <span class="string">unsafe-url</span></span><br></pre></td></tr></table></figure>

<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">HTTP/1.1</span> <span class="string">200 OK</span></span><br><span class="line"><span class="attr">Bdpagetype</span>: <span class="string">1</span></span><br><span class="line"><span class="attr">Bdqid</span>: <span class="string">0x8e10ff8100084b71 </span></span><br><span class="line"><span class="meta">Cache-Control</span>: <span class="string">private	  #缓存控制</span></span><br><span class="line"><span class="attr">Connection</span>: <span class="string">keep-alive	  #保持连接</span></span><br><span class="line"><span class="meta">Content-Encoding</span>: <span class="string">gzip</span></span><br><span class="line"><span class="meta">Content-Type</span>: <span class="string">text/html;charset=utf-8</span></span><br><span class="line"><span class="attr">Date</span>: <span class="string">Sun, 05 Jul 2020 05:04:37 GMT</span></span><br><span class="line"><span class="attr">Expires</span>: <span class="string">Sun, 05 Jul 2020 05:03:57 GMT</span></span><br><span class="line"><span class="attr">Server</span>: <span class="string">BWS/1.1</span></span><br><span class="line"><span class="meta">Set-Cookie</span>: <span class="string">BDSVRTM=0; path=/</span></span><br><span class="line"><span class="meta">Set-Cookie</span>: <span class="string">BD_HOME=1; path=/</span></span><br><span class="line"><span class="meta">Set-Cookie</span>: <span class="string">H_PS_PSSID=31909_1421_32125_32139_31253_32045_32231_26350_31640; path=/; domain=.baidu.com</span></span><br><span class="line"><span class="meta">Strict-Transport-Security</span>: <span class="string">max-age=172800</span></span><br><span class="line"><span class="attr">Traceid</span>: <span class="string">1593925477060730164210236962882529545073</span></span><br><span class="line"><span class="meta">X-Ua-Compatible</span>: <span class="string">IE=Edge,chrome=1</span></span><br><span class="line"><span class="meta">Transfer-Encoding</span>: <span class="string">chunked</span></span><br></pre></td></tr></table></figure>

<p>请求头</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">GET</span> <span class="string">/ HTTP/1.1</span></span><br><span class="line"><span class="attr">Host</span>: <span class="string">www.baidu.com</span></span><br><span class="line"><span class="attr">Connection</span>: <span class="string">keep-alive</span></span><br><span class="line"><span class="meta">Upgrade-Insecure-Requests</span>: <span class="string">1</span></span><br><span class="line"><span class="meta">User-Agent</span>: <span class="string">Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/83.0.4103.116 Safari/537.36 Edg/83.0.478.58</span></span><br><span class="line"><span class="attr">Accept</span>: <span class="string">text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9</span></span><br><span class="line"><span class="meta">Sec-Fetch-Site</span>: <span class="string">same-site</span></span><br><span class="line"><span class="meta">Sec-Fetch-Mode</span>: <span class="string">navigate</span></span><br><span class="line"><span class="meta">Sec-Fetch-User</span>: <span class="string">?1</span></span><br><span class="line"><span class="meta">Sec-Fetch-Dest</span>: <span class="string">document</span></span><br><span class="line"><span class="attr">Referer</span>: <span class="string">https://www.baidu.com/</span></span><br><span class="line"><span class="meta">Accept-Encoding</span>: <span class="string">gzip, deflate, br</span></span><br><span class="line"><span class="meta">Accept-Language</span>: <span class="string">zh-CN,zh;q=0.9,en;q=0.8,en-GB;q=0.7,en-US;q=0.6</span></span><br><span class="line"><span class="attr">Cookie</span>: <span class="string">BAIDUID=52005DB7B97751EB89DF7D5DE35C38B5:FG=1; BIDUPSID=52005DB7B97751EB89DF7D5DE35C38B5; PSTM=1579320821; BD_UPN=12314753; BDORZ=B490B5EBF6F3CD402E515D22BCDA1598; delPer=0; BD_CK_SAM=1; PSINO=5; H_PS_PSSID=31909_1421_32125_32139_31253_32045_32231_26350_31640; COOKIE_SESSION=235824_3_5_3_9_17_1_3_3_4_72_0_235738_0_1_1_1593923289_1593687465_1593923288%7C9%23500531_40_1593687464%7C9; BD_HOME=1; H_PS_645EC=8299sNEb2dUrI8qCuaZ3eo37xBhdFDqJGqeZJZDzLeQ3zdBJGpDc4CnJUHE; sugstore=1</span></span><br></pre></td></tr></table></figure>

<img src= "/img/loading.gif" data-src="/2020/07/05/javaWeb%E5%AD%A6%E4%B9%A0/image-20200705131152360.png" class>

<h3 id="3-3、多种请求方式"><a href="#3-3、多种请求方式" class="headerlink" title="3.3、多种请求方式"></a>3.3、多种请求方式</h3><table>
<thead>
<tr>
<th>序号</th>
<th>方法</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>1</td>
<td>GET</td>
<td>发送请求来获得服务器上的资源，请求体中不会包含请求数据，请求数据放在协议头中。另外get支持快取、缓存、可保留书签等。幂等</td>
</tr>
<tr>
<td>2</td>
<td>POST</td>
<td>和get一样很常见，向服务器提交资源让服务器处理，比如提交表单、上传文件等，可能导致建立新的资源或者对原有资源的修改。提交的资源放在请求体中。不支持快取。非幂等</td>
</tr>
<tr>
<td>3</td>
<td>HEAD</td>
<td>本质和get一样，但是响应中没有呈现数据，而是http的头信息，主要用来检查资源或超链接的有效性或是否可以可达、检查网页是否被串改或更新，获取头信息等，特别适用在有限的速度和带宽下。</td>
</tr>
<tr>
<td>4</td>
<td>PUT</td>
<td>和post类似，html表单不支持，发送资源与服务器，并存储在服务器指定位置，要求客户端事先知道该位置；比如post是在一个集合上（/province），而put是具体某一个资源上（/province/123）。所以put是安全的，无论请求多少次，都是在123上更改，而post可能请求几次创建了几次资源。幂等</td>
</tr>
<tr>
<td>5</td>
<td>DELETE</td>
<td>请求服务器删除某资源。和put都具有破坏性，可能被防火墙拦截。如果是https协议，则无需担心。幂等</td>
</tr>
<tr>
<td>6</td>
<td>CONNECT</td>
<td>HTTP/1.1协议中预留给能够将连接改为管道方式的代理服务器。就是把服务器作为跳板，去访问其他网页然后把数据返回回来，连接成功后，就可以正常的get、post了。</td>
</tr>
<tr>
<td>7</td>
<td>OPTIONS</td>
<td>获取http服务器支持的http请求方法，允许客户端查看服务器的性能，比如ajax跨域时的预检等。</td>
</tr>
<tr>
<td>8</td>
<td>TRACE</td>
<td>回显服务器收到的请求，主要用于测试或诊断。一般禁用，防止被恶意</td>
</tr>
</tbody></table>
<h3 id="3-4、Http状态码"><a href="#3-4、Http状态码" class="headerlink" title="3.4、Http状态码"></a>3.4、Http状态码</h3><table>
<thead>
<tr>
<th>1**</th>
<th align="left">信息，服务器收到请求，需要请求者继续执行操作</th>
</tr>
</thead>
<tbody><tr>
<td>2**</td>
<td align="left">成功，操作被成功接收并处理</td>
</tr>
<tr>
<td>3**</td>
<td align="left">重定向，需要进一步的操作以完成请求</td>
</tr>
<tr>
<td>4**</td>
<td align="left">客户端错误，请求包含语法错误或无法完成请求</td>
</tr>
<tr>
<td>5**</td>
<td align="left">服务器错误，服务器在处理请求的过程中发生了错误</td>
</tr>
</tbody></table>
<h3 id="3-5、restful请求规范"><a href="#3-5、restful请求规范" class="headerlink" title="3.5、restful请求规范"></a>3.5、restful请求规范</h3><p>1，GET：GET可以说是最常见的了，它本质就是发送一个请求来取得服务器上的某一资源。资源通过一组HTTP头和呈现据（如HTML文本，或者图片或者视频等）返回给客户端。</p>
<p>GET请求中，永远不会包含呈现数据。</p>
<p>2，HEAD：HEAD和GET本质是一样的，区别在于HEAD不含有呈现数据，而仅仅是HTTP头信息。有的人可能觉得这个方法没什么用，其实不是这样的。</p>
<p>想象一个业务情景：欲判断某个资源是否存在，我们通常使用GET，但这里用HEAD则意义更加明确。</p>
<p>3，PUT：这个方法比较少见。HTML表单也不支持这个。本质上来讲， PUT和POST极为相似，都是向服务器发送数据，但它们之间有一个重要区别，</p>
<p>PUT通常指定了资源的存放位置，而POST则没有，POST的数据存放位置由服务器自己决定。举个例子：如一个用于提交博文的URL，/addNew。</p>
<p>如果用PUT，则提交的URL会是像这样的”/addNew/abc123”，其中abc123就是这个博文的地址。而如果用POST，则这个地址会在提交后由服务器告知客户端。</p>
<p>目前大部分博客都是这样的。显然，PUT和POST用途是不一样的。具体用哪个还取决于当前的业务场景。</p>
<p>4，DELETE：删除某一个资源。基本上这个也很少见，不过还是有一些地方比如amazon的S3云服务里面就用的这个方法来删除资源。</p>
<p>5，POST：向服务器提交数据。这个方法用途广泛，几乎目前所有的提交操作都是靠这个完成。</p>
<p>6，OPTIONS：这个方法很有趣，但极少使用。它用于获取当前URL所支持的方法。若请求成功，则它会在HTTP头中包含一个名为“Allow”的头，值是所支持的方法，如“GET, POST”。</p>
<p>我们可理解为以下：<br>—————————————————————</p>
<p>1、GET      /url/list           查看<br>2、POST    /url/create        创建<br>3、PUT      /url/update        更新<br>4、DELETE  /url/delete         删除<br>5、HEAD    /url/is_exists      检查资源<br>6、PATCH    /url/update_by_id  更新某些字段<br>7、OPTIONS  /url/get_methods  检查请求方式</p>
<h2 id="4、maven"><a href="#4、maven" class="headerlink" title="4、maven"></a>4、maven</h2><p>修改maven镜像为aliyun</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">  <span class="tag">&lt;<span class="name">mirrors</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">mirror</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">id</span>&gt;</span>alimaven<span class="tag">&lt;/<span class="name">id</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>aliyun maven<span class="tag">&lt;/<span class="name">name</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">url</span>&gt;</span>http://maven.aliyun.com/nexus/content/groups/public/<span class="tag">&lt;/<span class="name">url</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">mirrorOf</span>&gt;</span>central<span class="tag">&lt;/<span class="name">mirrorOf</span>&gt;</span> </span><br><span class="line">  <span class="tag">&lt;/<span class="name">mirror</span>&gt;</span> </span><br><span class="line">  </span><br><span class="line">  <span class="tag">&lt;<span class="name">mirror</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">id</span>&gt;</span>mirrorId<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mirrorOf</span>&gt;</span>central<span class="tag">&lt;/<span class="name">mirrorOf</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">name</span>&gt;</span>Human Readable Name <span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">url</span>&gt;</span>http://repo1.maven.org/maven2/<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mirror</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 又一个镜像 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mirror</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">id</span>&gt;</span>alimaven<span class="tag">&lt;/<span class="name">id</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">name</span>&gt;</span>aliyun maven<span class="tag">&lt;/<span class="name">name</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">url</span>&gt;</span>http://central.maven.org/maven2<span class="tag">&lt;/<span class="name">url</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">mirrorOf</span>&gt;</span>central<span class="tag">&lt;/<span class="name">mirrorOf</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;/<span class="name">mirror</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- junit镜像地址 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mirror</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">id</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">id</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">name</span>&gt;</span>junit Address/<span class="tag">&lt;/<span class="name">name</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">url</span>&gt;</span>http://jcenter.bintray.com/<span class="tag">&lt;/<span class="name">url</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">mirrorOf</span>&gt;</span>central<span class="tag">&lt;/<span class="name">mirrorOf</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;/<span class="name">mirror</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">mirrors</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="5、servlet"><a href="#5、servlet" class="headerlink" title="5、servlet"></a>5、servlet</h2><h3 id="5-1、配置"><a href="#5-1、配置" class="headerlink" title="5.1、配置"></a>5.1、配置</h3><p>导入servlet包</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- https://mvnrepository.com/artifact/javax.servlet.jsp/javax.servlet.jsp-api --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet.jsp<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>javax.servlet.jsp-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.3.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- https://mvnrepository.com/artifact/javax.servlet/javax.servlet-api --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>javax.servlet-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.1.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="5-2、HelloServlet"><a href="#5-2、HelloServlet" class="headerlink" title="5.2、HelloServlet"></a>5.2、HelloServlet</h3><p>继承HttpServlet 重写doGet和doPoset </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloServlet</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        doPost(req,resp);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        PrintWriter writer = resp.getWriter();</span><br><span class="line">        writer.println(<span class="string">"helloServlet01"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>web.xml中配置servlet映射</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--注册--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>servlet01<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>com.lean.servlet.HelloServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--请求路径--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>servlet01<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/servlet01<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="5-3、Servlet原理"><a href="#5-3、Servlet原理" class="headerlink" title="5.3、Servlet原理"></a>5.3、Servlet原理</h3><img src= "/img/loading.gif" data-src="/2020/07/05/javaWeb%E5%AD%A6%E4%B9%A0/image-20200705133116676.png" class>

<h3 id="5-4、context公共容器"><a href="#5-4、context公共容器" class="headerlink" title="5.4、context公共容器"></a>5.4、context公共容器</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">ServletContext context =   <span class="keyword">this</span>.getServletContext();<span class="comment">//公用容器，每个web 应用只有一个context</span></span><br><span class="line">       resp.setContentType(<span class="string">"text/html"</span>);</span><br><span class="line">       resp.setCharacterEncoding(<span class="string">"utf-8"</span>);</span><br><span class="line">       PrintWriter writer = resp.getWriter();</span><br><span class="line">       <span class="keyword">if</span>(context.getAttribute(<span class="string">"strUsername"</span>) !=<span class="keyword">null</span>) &#123;</span><br><span class="line"></span><br><span class="line">           writer.println(context.getAttribute(<span class="string">"strUsername"</span>));<span class="comment">//获取容器里strUsername的值</span></span><br><span class="line">       &#125;</span><br><span class="line">       <span class="keyword">else</span></span><br><span class="line">       &#123;</span><br><span class="line">           <span class="keyword">if</span>(context.getAttribute(<span class="string">"strRequestDispatcher"</span>) !=<span class="keyword">null</span>) &#123;</span><br><span class="line">               writer.println(context.getAttribute(<span class="string">"strRequestDispatcher"</span>));<span class="comment">//请求转发值</span></span><br><span class="line">           &#125;</span><br><span class="line">           <span class="keyword">else</span></span><br><span class="line">           &#123;</span><br><span class="line">               writer.println(context.getInitParameter(<span class="string">"url"</span>));<span class="comment">//获取web.xml里的初始值</span></span><br><span class="line">           &#125;</span><br><span class="line">       &#125;</span><br></pre></td></tr></table></figure>

<h2 id="6、servlet"><a href="#6、servlet" class="headerlink" title="6、servlet"></a>6、servlet</h2><h3 id="6-1、Servlet初始化参数"><a href="#6-1、Servlet初始化参数" class="headerlink" title="6.1、Servlet初始化参数"></a>6.1、Servlet初始化参数</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>servlet02<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>com.lean.servlet.HelloServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>test<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>123<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">this</span>.getInitParameter(<span class="string">"test"</span>);</span><br><span class="line">ServletConfig servletConfig = <span class="keyword">this</span>.getServletConfig();</span><br><span class="line">ServletContext context =   <span class="keyword">this</span>.getServletContext();<span class="comment">//公用容器，每个web 应用只有一个context</span></span><br><span class="line">String strUsername = <span class="string">"Lean林"</span>;</span><br><span class="line">context.setAttribute(<span class="string">"strUsername"</span>,strUsername);<span class="comment">//将值写入context便于其他方法读取</span></span><br><span class="line">resp.setContentType(<span class="string">"text/html"</span>);</span><br><span class="line">resp.setCharacterEncoding(<span class="string">"utf-8"</span>);</span><br><span class="line">PrintWriter writer = resp.getWriter();</span><br><span class="line">writer.println(context.getAttribute(<span class="string">"strUsername"</span>));</span><br></pre></td></tr></table></figure>

<h3 id="6-2、读取配置文件"><a href="#6-2、读取配置文件" class="headerlink" title="6.2、读取配置文件"></a>6.2、读取配置文件</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">InputStream inputStream =  <span class="keyword">this</span>.getServletContext().getResourceAsStream(<span class="string">"/WEB-INF/classes/db.properties"</span>);</span><br><span class="line">Properties properties = <span class="keyword">new</span> Properties();</span><br><span class="line">properties.load(inputStream);</span><br><span class="line">String username=  properties.getProperty(<span class="string">"username"</span>);</span><br><span class="line">String password=  properties.getProperty(<span class="string">"password"</span>);</span><br><span class="line">resp.setContentType(<span class="string">"text/html"</span>);</span><br><span class="line">resp.setCharacterEncoding(<span class="string">"utf-8"</span>);</span><br><span class="line">resp.getWriter().println(<span class="string">"username:"</span> + username +<span class="string">"\r\n"</span> +<span class="string">"password:"</span> +password);</span><br></pre></td></tr></table></figure>

<h3 id="6-3、请求转发与重定向"><a href="#6-3、请求转发与重定向" class="headerlink" title="6.3、请求转发与重定向"></a>6.3、请求转发与重定向</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ServletContext context = <span class="keyword">this</span>.getServletContext();</span><br><span class="line">context.setAttribute(<span class="string">"strRequestDispatcher"</span>,<span class="string">"1"</span>);</span><br><span class="line">context.getRequestDispatcher(<span class="string">"/getservlet02"</span>).forward(req,resp);<span class="comment">//转发路径，forward请求转发，与重定向本质上不同</span></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">response.sendRedirect(<span class="string">"test.jsp"</span>);</span><br></pre></td></tr></table></figure>

<p>转发产生两次请求  重定向只产生一次。 </p>
<h2 id="7、LoginServlet"><a href="#7、LoginServlet" class="headerlink" title="7、LoginServlet"></a>7、LoginServlet</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"> req.setCharacterEncoding(<span class="string">"utf-8"</span>);</span><br><span class="line"> resp.setCharacterEncoding(<span class="string">"utf-8"</span>);</span><br><span class="line">String username =</span><br><span class="line">  req.getParameter(<span class="string">"username"</span>);</span><br><span class="line">String password =</span><br><span class="line">  req.getParameter(<span class="string">"password"</span>);</span><br><span class="line">String[] hobby =</span><br><span class="line">  req.getParameterValues(<span class="string">"hobby"</span>);</span><br><span class="line">System.out.println(username);</span><br><span class="line"> System.out.println(password);</span><br><span class="line"> System.out.println((Arrays.toString(hobby)));</span><br><span class="line"> <span class="comment">//请求转发//转发不路径//重定向302转发307</span></span><br><span class="line"> req.getRequestDispatcher( <span class="string">"/Success.jsp"</span>).forward(req,resp);</span><br><span class="line"> resp.setCharacterEncoding(<span class="string">"utf-8"</span>);</span><br></pre></td></tr></table></figure>

<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">   &lt;form action=<span class="string">"$&#123;pageContext.request.contextPath&#125;/Login"</span> method=<span class="string">"post"</span>&gt;</span><br><span class="line">        用户名：&lt;input type=<span class="string">"text"</span> name=<span class="string">"username"</span>&gt;</span><br><span class="line">        密码：&lt;input type=<span class="string">"password"</span> name = <span class="string">"password"</span>&gt;</span><br><span class="line">        爱好：</span><br><span class="line">        &lt;input type=<span class="string">"checkbox"</span> name =<span class="string">"hobby"</span> value=<span class="string">"女孩"</span>&gt;女孩</span><br><span class="line">        &lt;input type=<span class="string">"checkbox"</span> name =<span class="string">"hobby"</span> value=<span class="string">"男孩"</span>&gt;男孩</span><br><span class="line">        &lt;input type=<span class="string">"checkbox"</span> name =<span class="string">"hobby"</span> value=<span class="string">"男人"</span>&gt;男人</span><br><span class="line">        &lt;input type=<span class="string">"checkbox"</span> name =<span class="string">"hobby"</span> value=<span class="string">"女人"</span>&gt;女人</span><br><span class="line">&lt;input type=<span class="string">"submit"</span>&gt;</span><br><span class="line">    &lt;/form&gt;</span><br></pre></td></tr></table></figure>

<h2 id="8、Servlet文件下载"><a href="#8、Servlet文件下载" class="headerlink" title="8、Servlet文件下载"></a>8、Servlet文件下载</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">   <span class="comment">//1、获取文件真实路径</span></span><br><span class="line">  <span class="comment">//String realPath =   this.getServletContext().getContextPath()+"/WEB-INF/classes/FileServlet.png";</span></span><br><span class="line">  String realPath =   <span class="keyword">this</span>.getServletContext().getContextPath()+<span class="string">"/WEB-INF/classes/FileServlet.png"</span>;</span><br><span class="line"><span class="comment">//  String realPath = this.getServletContext().getRealPath("/FileServlet.png");</span></span><br><span class="line">  <span class="comment">//2、文件名</span></span><br><span class="line">  String fileName =  realPath.substring(realPath.lastIndexOf(<span class="string">"\\"</span>)+<span class="number">1</span>);</span><br><span class="line">  <span class="comment">//3、设置头</span></span><br><span class="line">  resp.setHeader(<span class="string">"Content-Disposition"</span>,<span class="string">"attachment; filename="</span>+ URLEncoder.encode(fileName,<span class="string">"utf-8"</span>));</span><br><span class="line">  <span class="comment">//4、读取文件流</span></span><br><span class="line">  InputStream inputStream = getServletContext().getResourceAsStream(<span class="string">"/WEB-INF/classes/FileServlet.png"</span>);</span><br><span class="line">  <span class="comment">//5、创建缓冲区</span></span><br><span class="line">  <span class="keyword">int</span> len = <span class="number">0</span> ;</span><br><span class="line">  <span class="keyword">byte</span>[] buffer = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">1024</span>];</span><br><span class="line">  <span class="comment">//6、获取output对象</span></span><br><span class="line">  ServletOutputStream outputStream =  resp.getOutputStream();</span><br><span class="line">  <span class="comment">//7、将流写入缓冲区并返回客户端</span></span><br><span class="line">  <span class="keyword">while</span>((len= inputStream.read(buffer))&gt;<span class="number">0</span>)&#123;</span><br><span class="line">        outputStream.write(buffer,<span class="number">0</span>,len);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">//8、安全操作关闭流</span></span><br><span class="line">  inputStream.close();</span><br><span class="line">  outputStream.close();</span><br></pre></td></tr></table></figure>

<p>图片画板 验证码生成</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line"> <span class="comment">//三秒刷新</span></span><br><span class="line">  resp.setHeader(<span class="string">"refresh"</span>,<span class="string">"3"</span>);</span><br><span class="line">    BufferedImage bufferedImage = <span class="keyword">new</span> BufferedImage( <span class="number">80</span>,<span class="number">20</span>, BufferedImage.TYPE_INT_BGR);</span><br><span class="line">   <span class="comment">//得到画板</span></span><br><span class="line">    Graphics2D graphics = (Graphics2D) bufferedImage.getGraphics();</span><br><span class="line">    <span class="comment">//背景颜色</span></span><br><span class="line">    graphics.setColor(Color.BLUE);<span class="comment">//画笔颜色</span></span><br><span class="line">    graphics.fillRect(<span class="number">0</span>,<span class="number">0</span>,<span class="number">80</span>,<span class="number">20</span>);</span><br><span class="line">    graphics.setColor(Color.WHITE);</span><br><span class="line">    graphics.setFont(<span class="keyword">new</span> Font(<span class="keyword">null</span>,Font.BOLD,<span class="number">20</span>));</span><br><span class="line">    graphics.drawString(makeNum(),<span class="number">0</span>,<span class="number">20</span>);</span><br><span class="line">    resp.setContentType(<span class="string">"image/jpeg"</span>);</span><br><span class="line">    <span class="comment">//禁用缓存</span></span><br><span class="line">    resp.setDateHeader(<span class="string">"expires"</span>,-<span class="number">1</span>);</span><br><span class="line">    resp.setHeader(<span class="string">"Cache-Control"</span>,<span class="string">"no-cache"</span>);</span><br><span class="line">    resp.setHeader(<span class="string">"Pragma"</span>,<span class="string">"no-cache"</span>);</span><br><span class="line">    <span class="keyword">boolean</span> write =  ImageIO.write(bufferedImage,<span class="string">"jpg"</span>,resp.getOutputStream());</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> String <span class="title">makeNum</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    Random random = <span class="keyword">new</span> Random();</span><br><span class="line">    String num = random.nextInt(<span class="number">9999999</span>)+<span class="string">""</span>;</span><br><span class="line">    StringBuffer sb = <span class="keyword">new</span> StringBuffer();</span><br><span class="line">    <span class="comment">//填充7位</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span> ;i&lt;<span class="number">7</span>-num.length();i++)</span><br><span class="line">    &#123;</span><br><span class="line">        sb.append(<span class="string">"0"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> num;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="9、session-与cookies"><a href="#9、session-与cookies" class="headerlink" title="9、session 与cookies"></a>9、session 与cookies</h2><p>cookies由服务器分发 而session存储于context</p>
<h3 id="9-1、cookies"><a href="#9-1、cookies" class="headerlink" title="9.1、cookies"></a>9.1、cookies</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"> <span class="comment">//服务器告诉你你来的时间把这个时间封装成一个信件带来服务器就知道你来了</span></span><br><span class="line"> <span class="comment">//转码</span></span><br><span class="line"> req.setCharacterEncoding(<span class="string">"utf-8"</span>);</span><br><span class="line"><span class="comment">// resp.setContentType("text/html");</span></span><br><span class="line"> resp.setHeader(<span class="string">"Content-Type"</span>,<span class="string">"text/html;charset=utf-8"</span>);</span><br><span class="line"><span class="comment">// resp.setCharacterEncoding("utf-8");</span></span><br><span class="line"> PrintWriter out = resp.getWriter();</span><br><span class="line"> Cookie[] cookies =req.getCookies();<span class="comment">//从request中提取cookies</span></span><br><span class="line"> <span class="keyword">if</span>(cookies == <span class="keyword">null</span>)</span><br><span class="line"> &#123;</span><br><span class="line">     out.write(<span class="string">"这是你第一次访问本站"</span>);</span><br><span class="line"> &#125;</span><br><span class="line"> <span class="keyword">else</span></span><br><span class="line"> &#123;</span><br><span class="line">    out.write(<span class="string">"您上一次访问的时间是："</span>);</span><br><span class="line">     <span class="keyword">for</span>(<span class="keyword">int</span> i =<span class="number">0</span>;i&lt;cookies.length;i++)</span><br><span class="line">     &#123;</span><br><span class="line">         Cookie cookie = cookies[i];</span><br><span class="line">         <span class="comment">//获取cookie名字</span></span><br><span class="line">         <span class="keyword">if</span>( cookie.getName().equals(<span class="string">"LastLoginTime"</span>))</span><br><span class="line">         &#123;</span><br><span class="line">             <span class="keyword">long</span> lastLongtime =Long.parseLong(cookie.getValue());</span><br><span class="line">             Date date = <span class="keyword">new</span> Date(lastLongtime);</span><br><span class="line">             out.write(date.toLocaleString());</span><br><span class="line">         &#125;</span><br><span class="line">         <span class="keyword">if</span>( cookie.getName().equals(<span class="string">"zh_cn"</span>))</span><br><span class="line">         &#123;</span><br><span class="line">             out.write(URLDecoder.decode(cookie.getValue(),<span class="string">"utf-8"</span>));  <span class="comment">//中文读取解码--</span></span><br><span class="line">         &#125;</span><br><span class="line">     &#125;</span><br><span class="line"> &#125;</span><br><span class="line"> Cookie cookieName = <span class="keyword">new</span> Cookie(<span class="string">"LastLoginTime"</span>,System.currentTimeMillis()+<span class="string">""</span>);</span><br><span class="line"> Cookie cookieEncode = <span class="keyword">new</span> Cookie(<span class="string">"zh_cn"</span>, URLEncoder.encode(<span class="string">"测试"</span>,<span class="string">"utf-8"</span>));<span class="comment">//中文存入转码--可以使用</span></span><br><span class="line"> cookieName.setMaxAge(<span class="number">60</span>*<span class="number">1000</span>);</span><br><span class="line"> resp.addCookie(cookieName);</span><br></pre></td></tr></table></figure>

<h3 id="9-2、Session"><a href="#9-2、Session" class="headerlink" title="9.2、Session"></a>9.2、Session</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">req.setCharacterEncoding(<span class="string">"utf-8"</span>);</span><br><span class="line">resp.setHeader(<span class="string">"Content-Type"</span>,<span class="string">"text/html;charset=utf-8"</span>);</span><br><span class="line">HttpSession session = req.getSession();</span><br><span class="line">session.setAttribute(<span class="string">"name"</span>,<span class="keyword">new</span> Person(<span class="string">"Lean林"</span>,<span class="number">1</span>));</span><br><span class="line">String id = session.getId();</span><br><span class="line"><span class="keyword">if</span>(session.isNew())</span><br><span class="line">&#123;</span><br><span class="line">    resp.getWriter().write(<span class="string">"session创建成功，id："</span>+id +<span class="string">"session值："</span>+session.getAttribute(<span class="string">"name"</span>).toString());</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> &#123;</span><br><span class="line">    resp.getWriter().write(<span class="string">"已经存在session"</span>+session.getAttribute(<span class="string">"name"</span>).toString()+<span class="string">"id:"</span>+id);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">HttpSession session = req.getSession();</span><br><span class="line">session.removeAttribute(<span class="string">"name"</span>);<span class="comment">//移除session中的name</span></span><br><span class="line">session.invalidate();<span class="comment">//或者，注销session//注销会再次生成一个新session等同与关闭浏览器</span></span><br></pre></td></tr></table></figure>

<h2 id="10、JSP"><a href="#10、JSP" class="headerlink" title="10、JSP"></a>10、JSP</h2><h3 id="10-1、JSP原理"><a href="#10-1、JSP原理" class="headerlink" title="10.1、JSP原理"></a>10.1、JSP原理</h3><img src= "/img/loading.gif" data-src="/2020/07/05/javaWeb%E5%AD%A6%E4%B9%A0/image-20200705141747615.png" class>



<h3 id="10-2、-JSP表达式"><a href="#10-2、-JSP表达式" class="headerlink" title="10.2、 JSP表达式"></a>10.2、 JSP表达式</h3><h4 id="10-2-1、内置对象"><a href="#10-2-1、内置对象" class="headerlink" title="10.2.1、内置对象"></a>10.2.1、内置对象</h4><img src= "/img/loading.gif" data-src="/2020/07/05/javaWeb%E5%AD%A6%E4%B9%A0/image-20200705141638400.png" class>

<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">"text/html;charset=UTF-8"</span> language=<span class="string">"java"</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;Title&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;%--内置对象--%&gt;</span><br><span class="line">&lt;%</span><br><span class="line">    pageContext.setAttribute(<span class="string">"name1"</span>,<span class="string">"lean1"</span>);</span><br><span class="line">    request.setAttribute(<span class="string">"name2"</span>,<span class="string">"lean2"</span>);</span><br><span class="line">    session.setAttribute(<span class="string">"name3"</span>,<span class="string">"lean3"</span>);</span><br><span class="line">    application.setAttribute(<span class="string">"name4"</span>,<span class="string">"lean4"</span>);</span><br><span class="line"></span><br><span class="line">%&gt;</span><br><span class="line">&lt;%</span><br><span class="line">    String name1 = (String ) pageContext.getAttribute(<span class="string">"name1"</span>);</span><br><span class="line">    pageContext.findAttribute(<span class="string">"name2"</span>);</span><br><span class="line">%&gt;</span><br><span class="line">&lt;h1&gt;$&#123;name1&#125;&lt;/h1&gt;</span><br><span class="line">&lt;jsp:include page="/index.jsp"&gt;&lt;/jsp:include&gt;&lt;!--要加/ --&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<h4 id="10-2-2、jsptag"><a href="#10-2-2、jsptag" class="headerlink" title="10.2.2、jsptag"></a>10.2.2、jsptag</h4><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">"text/html;charset=UTF-8"</span> language=<span class="string">"java"</span> %&gt;</span><br><span class="line">&lt;%--引入jstl核心库--%&gt;</span><br><span class="line">&lt;%@ taglib prefix=<span class="string">"c"</span> uri=<span class="string">"http://java.sun.com/jsp/jstl/core"</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;Title&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">这是<span class="number">1</span></span><br><span class="line">&lt;%--这个forward也是请求转发   jstl包  jstl标签库--%&gt;</span><br><span class="line">&lt;jsp:forward page=<span class="string">"japtag2.jsp"</span>&gt;</span><br><span class="line">    &lt;jsp:param name=<span class="string">"value1"</span> value=<span class="string">"1"</span>/&gt;</span><br><span class="line">    &lt;jsp:param name=<span class="string">"value2"</span> value=<span class="string">"1"</span>/&gt;</span><br><span class="line">&lt;/jsp:forward&gt;</span><br><span class="line"></span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<h4 id="10-2-3、javabean"><a href="#10-2-3、javabean" class="headerlink" title="10.2.3、javabean"></a>10.2.3、javabean</h4><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">"text/html;charset=UTF-8"</span> language=<span class="string">"java"</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;Title&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;jsp:useBean id="people" class="com.lean.pojo.People" scope="page"&gt;&lt;/jsp:useBean&gt;</span><br><span class="line">&lt;jsp:setProperty name="people" property="address" value="西安"&gt;&lt;/jsp:setProperty&gt;</span><br><span class="line"></span><br><span class="line">&lt;jsp:getProperty name=<span class="string">"people"</span> property=<span class="string">"address"</span>/&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<h4 id="10-2-4、casewhen"><a href="#10-2-4、casewhen" class="headerlink" title="10.2.4、casewhen"></a>10.2.4、casewhen</h4><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">"text/html;charset=UTF-8"</span> language=<span class="string">"java"</span> %&gt;</span><br><span class="line">&lt;%@ taglib prefix=<span class="string">"c"</span> uri=<span class="string">"http://java.sun.com/jsp/jstl/core"</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;Title&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;c:set <span class="keyword">var</span>=<span class="string">"score"</span> value=<span class="string">"85"</span>&gt;</span><br><span class="line"></span><br><span class="line">&lt;/c:set&gt;</span><br><span class="line">&lt;c:choose&gt;</span><br><span class="line">    &lt;c:when test=<span class="string">"$&#123;score&gt;=90&#125;"</span>&gt;</span><br><span class="line">        你的成绩优秀</span><br><span class="line">    &lt;/c:when&gt;</span><br><span class="line">    &lt;c:when test=<span class="string">"$&#123;score&gt;=80&#125;"</span>&gt;</span><br><span class="line">        你的成绩一般</span><br><span class="line">    &lt;/c:when&gt;</span><br><span class="line">&lt;/c:choose&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<h4 id="10-2-5、if"><a href="#10-2-5、if" class="headerlink" title="10.2.5、if"></a>10.2.5、if</h4><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">"text/html;charset=UTF-8"</span> language=<span class="string">"java"</span> %&gt;</span><br><span class="line"></span><br><span class="line">&lt;%@ taglib prefix=<span class="string">"c"</span> uri=<span class="string">"http://java.sun.com/jstl/core"</span> %&gt;。</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;Title&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;h&gt; if测试&lt;/h&gt;</span><br><span class="line">&lt;hr&gt;</span><br><span class="line">&lt;form action=<span class="string">"coreif.jsp"</span> method=<span class="string">"get"</span>&gt;</span><br><span class="line">    &lt;input type=<span class="string">"text"</span> name=<span class="string">"username"</span> value=<span class="string">"$&#123;param.username&#125;"</span>/&gt;</span><br><span class="line">    &lt;input type=<span class="string">"submit"</span>/&gt;</span><br><span class="line">&lt;/form&gt;</span><br><span class="line">&lt;%--如果提交的用户名是管理员则登录成功--%&gt;</span><br><span class="line">&lt;c:<span class="keyword">if</span> test=<span class="string">"$&#123;param.username=='admin'&#125;"</span> <span class="keyword">var</span>=<span class="string">"isAdministrator"</span>&gt;</span><br><span class="line">    &lt;c:out value="管理员欢迎你"&gt;&lt;/c:out&gt;</span><br><span class="line">&lt;/c:if&gt;</span><br><span class="line">&lt;c:out value="$&#123;isAdministrator&#125;"&gt;&lt;/c:out&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<h4 id="10-2-6-foreach"><a href="#10-2-6-foreach" class="headerlink" title="10.2.6 foreach"></a>10.2.6 foreach</h4><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">"text/html;charset=UTF-8"</span> language=<span class="string">"java"</span> %&gt;</span><br><span class="line">&lt;%@ taglib prefix=<span class="string">"c"</span> uri=<span class="string">"http://java.sun.com/jstl/core"</span> %&gt;。</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;Title&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;%</span><br><span class="line">    ArrayList&lt;String&gt; people = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">    people.add(<span class="number">0</span>,<span class="string">"张三"</span>);</span><br><span class="line">    people.add(<span class="number">1</span>,<span class="string">"张三"</span>);</span><br><span class="line">    people.add(<span class="number">2</span>,<span class="string">"李四"</span>);</span><br><span class="line">    people.add(<span class="number">3</span>,<span class="string">"王五"</span>);</span><br><span class="line">    people.add(<span class="number">4</span>,<span class="string">"赵六"</span>);</span><br><span class="line">    people.add(<span class="number">5</span>,<span class="string">"天气"</span>);</span><br><span class="line">    request.setAttribute(<span class="string">"list"</span>,people);</span><br><span class="line"></span><br><span class="line">%&gt;</span><br><span class="line">&lt;c:forEach <span class="keyword">var</span>=<span class="string">"people"</span> items=<span class="string">"$&#123;list&#125;"</span> end=<span class="string">"3"</span> begin=<span class="string">"1"</span>&gt;</span><br><span class="line">    &lt;c:out value="$&#123;people&#125;"&gt;&lt;/c:out&gt;</span><br><span class="line">&lt;/c:forEach&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<h2 id="11、fiter过滤器"><a href="#11、fiter过滤器" class="headerlink" title="11、fiter过滤器"></a>11、fiter过滤器</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CharacterEncodingFilter</span> <span class="keyword">implements</span> <span class="title">Filter</span> </span>&#123;</span><br><span class="line">    <span class="comment">//初始化</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">(FilterConfig filterConfig)</span> <span class="keyword">throws</span> ServletException </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"初始化"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doFilter</span><span class="params">(ServletRequest servletRequest, ServletResponse servletResponse, FilterChain filterChain)</span> <span class="keyword">throws</span> IOException, ServletException </span>&#123;</span><br><span class="line">            servletRequest.setCharacterEncoding(<span class="string">"utf-8"</span>);</span><br><span class="line">            servletResponse.setCharacterEncoding(<span class="string">"utf-8"</span>);</span><br><span class="line">            servletResponse.setContentType(<span class="string">"text/html;charset=UTF-8"</span>);</span><br><span class="line">            filterChain.doFilter(servletRequest,servletResponse);<span class="comment">//让请求继续执行，否则req和resp被拦截程序无法进行</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//销毁</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">destroy</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"销毁"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--    过滤路径/*整个网站--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>filter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/*<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">filter-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="12、监听器"><a href="#12、监听器" class="headerlink" title="12、监听器"></a>12、监听器</h2><p>实现listener接口，下述实现了HttpSessionListener 还有其他多种监听器 多了去了</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//统计网站在线人数</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">OnlineCounrListener</span> <span class="keyword">implements</span> <span class="title">HttpSessionListener</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">sessionCreated</span><span class="params">(HttpSessionEvent httpSessionEvent)</span> </span>&#123;</span><br><span class="line">        ServletContext servletContext = httpSessionEvent.getSession().getServletContext();</span><br><span class="line">        Integer onlineCount = (Integer) servletContext.getAttribute(<span class="string">"OnlineCount"</span>);</span><br><span class="line">        <span class="keyword">if</span>(onlineCount==<span class="keyword">null</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            onlineCount = <span class="keyword">new</span> Integer(<span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">int</span> count = onlineCount.intValue();</span><br><span class="line">            onlineCount = <span class="keyword">new</span> Integer(count+<span class="number">1</span>);<span class="comment">//等价于onlineCount ++;</span></span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">        servletContext.setAttribute(<span class="string">"OnlineCount"</span>,onlineCount);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">sessionDestroyed</span><span class="params">(HttpSessionEvent httpSessionEvent)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">listener</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">listener-class</span>&gt;</span>com.lean.listener.OnlineCounrListener<span class="tag">&lt;/<span class="name">listener-class</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">listener</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="13、JDBC"><a href="#13、JDBC" class="headerlink" title="13、JDBC"></a>13、JDBC</h2><img src= "/img/loading.gif" data-src="/2020/07/05/javaWeb%E5%AD%A6%E4%B9%A0/image-20200705143538441.png" class>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">  String url = <span class="string">"jdbc:mysql://localhost:3306/lean?useUnicode=true&amp;characterEncoding=utf-8"</span>;<span class="comment">//&amp;useSSL=true</span></span><br><span class="line">        String username= <span class="string">"administrator"</span>;</span><br><span class="line">        String password = <span class="string">"mm,966575"</span>;</span><br><span class="line"><span class="comment">//        加载驱动</span></span><br><span class="line">        Class.forName(<span class="string">"com.mysql.jdbc.Driver"</span>);</span><br><span class="line">        <span class="comment">//连接数据库，代表数据库</span></span><br><span class="line">        Connection connection =   DriverManager.getConnection(url,username,password);</span><br><span class="line">        <span class="comment">//向数据库发送SQL的对象statement//PreparedStatement:需要预编译:GRUD</span></span><br><span class="line">        Statement statement = connection.createStatement();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//编写sql</span></span><br><span class="line">        String sql = <span class="string">"select * from users"</span>;</span><br><span class="line">        <span class="comment">//执行sql，返回结果集 ;增删改都返回一个int 用update //statement.executeUpdate(sql);</span></span><br><span class="line">        ResultSet resultSet = statement.executeQuery(sql);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> (resultSet.next())</span><br><span class="line">        &#123;</span><br><span class="line">            System.out.println(<span class="string">"id="</span> +resultSet.getObject(<span class="string">"id"</span>));</span><br><span class="line">            System.out.println(<span class="string">"id="</span> +resultSet.getObject(<span class="string">"name"</span>));</span><br><span class="line">            System.out.println(<span class="string">"id="</span> +resultSet.getObject(<span class="string">"password"</span>));</span><br><span class="line">            System.out.println(<span class="string">"id="</span> +resultSet.getObject(<span class="string">"email"</span>));</span><br><span class="line">            System.out.println(<span class="string">"id="</span> +resultSet.getObject(<span class="string">"birthday"</span>));</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//关闭连接</span></span><br><span class="line">        statement.close();</span><br><span class="line">        connection.close();</span><br></pre></td></tr></table></figure>



<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"> String url = <span class="string">"jdbc:mysql://localhost:3306/lean?useUnicode=true&amp;characterEncoding=utf-8"</span>;<span class="comment">//&amp;useSSL=true</span></span><br><span class="line">        String username= <span class="string">"administrator"</span>;</span><br><span class="line">        String password = <span class="string">"mm,966575"</span>;</span><br><span class="line"><span class="comment">//        加载驱动</span></span><br><span class="line">        Class.forName(<span class="string">"com.mysql.jdbc.Driver"</span>);</span><br><span class="line">        <span class="comment">//连接数据库，代表数据库</span></span><br><span class="line">        Connection connection =   DriverManager.getConnection(url,username,password);</span><br><span class="line">        <span class="comment">//向数据库发送SQL的对象statement//PreparedStatement:需要预编译:GRUD</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">//编写sql</span></span><br><span class="line">        String sql = <span class="string">"insert into users(id,name,password,email,birthday) values (?,?,?,?,?)"</span>;</span><br><span class="line">        <span class="comment">//执行sql，返回结果集 ;增删改都返回一个int 用update //statement.executeUpdate(sql);</span></span><br><span class="line">        PreparedStatement preparedStatement = connection.prepareStatement(sql);</span><br><span class="line">        preparedStatement.setInt(<span class="number">1</span>,<span class="number">6</span>);<span class="comment">//给第一个占位符？赋值为1</span></span><br><span class="line">        preparedStatement.setString(<span class="number">2</span>,<span class="string">"2"</span>);</span><br><span class="line">        preparedStatement.setString(<span class="number">3</span>,<span class="string">"3"</span>);</span><br><span class="line">        preparedStatement.setString(<span class="number">4</span>,<span class="string">"4"</span>);</span><br><span class="line">        preparedStatement.setDate(<span class="number">5</span>, Date.valueOf(<span class="string">"2010-01-04"</span>));</span><br><span class="line">        <span class="keyword">int</span>  i  = preparedStatement.executeUpdate();</span><br><span class="line"></span><br><span class="line">        System.out.println(i);</span><br><span class="line">        <span class="comment">//关闭连接</span></span><br><span class="line">        preparedStatement.close();</span><br><span class="line">        connection.close();</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">   String url = <span class="string">"jdbc:mysql://localhost:3306/lean?useUnicode=true&amp;characterEncoding=utf-8"</span>;<span class="comment">//&amp;useSSL=true</span></span><br><span class="line">        String username= <span class="string">"administrator"</span>;</span><br><span class="line">        String password = <span class="string">"mm,966575"</span>;</span><br><span class="line"><span class="comment">//        加载驱动</span></span><br><span class="line">        Class.forName(<span class="string">"com.mysql.jdbc.Driver"</span>);</span><br><span class="line">        <span class="comment">//连接数据库，代表数据库</span></span><br><span class="line">        Connection connection =   DriverManager.getConnection(url,username,password);</span><br><span class="line">        <span class="comment">//设置不自动提交</span></span><br><span class="line">        connection.setAutoCommit(<span class="keyword">false</span>);</span><br><span class="line">        <span class="comment">//向数据库发送SQL的对象statement//PreparedStatement:需要预编译:GRUD</span></span><br><span class="line">        Statement statement = connection.createStatement();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//编写sql</span></span><br><span class="line">        String sql = <span class="string">"update account set money = money-100 where id  = 1 "</span>;</span><br><span class="line">        <span class="comment">//执行sql，返回结果集 ;增删改都返回一个int 用update //statement.executeUpdate(sql);</span></span><br><span class="line">        <span class="keyword">int</span> i = statement.executeUpdate(sql);</span><br><span class="line">        connection.rollback();</span><br><span class="line">        connection.commit();</span><br><span class="line"></span><br><span class="line">        statement.close();</span><br><span class="line">        connection.close();</span><br></pre></td></tr></table></figure>

<h2 id="14、文件上传"><a href="#14、文件上传" class="headerlink" title="14、文件上传"></a>14、文件上传</h2><p>导入以来commons-io 与fileupload包</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--文件上传--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>commons-fileupload<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>commons-fileupload<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.3.3<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">""</span>  <span class="attr">method</span>=<span class="string">"post"</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"file"</span> <span class="attr">name</span>=<span class="string">"file"</span>/&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> me.gacl.web.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line"><span class="keyword">import</span> java.io.FileOutputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> org.apache.commons.fileupload.FileItem;</span><br><span class="line"><span class="keyword">import</span> org.apache.commons.fileupload.disk.DiskFileItemFactory;</span><br><span class="line"><span class="keyword">import</span> org.apache.commons.fileupload.servlet.ServletFileUpload;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UploadHandleServlet</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span></span></span><br><span class="line"><span class="function">            <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">                <span class="comment">//得到上传文件的保存目录，将上传的文件存放于WEB-INF目录下，不允许外界直接访问，保证上传文件的安全</span></span><br><span class="line">                String savePath = <span class="keyword">this</span>.getServletContext().getRealPath(<span class="string">"/WEB-INF/upload"</span>);</span><br><span class="line">                File file = <span class="keyword">new</span> File(savePath);</span><br><span class="line">                <span class="comment">//判断上传文件的保存目录是否存在</span></span><br><span class="line">                <span class="keyword">if</span> (!file.exists() &amp;&amp; !file.isDirectory()) &#123;</span><br><span class="line">                    System.out.println(savePath+<span class="string">"目录不存在，需要创建"</span>);</span><br><span class="line">                    <span class="comment">//创建目录</span></span><br><span class="line">                    file.mkdir();</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="comment">//消息提示</span></span><br><span class="line">                String message = <span class="string">""</span>;</span><br><span class="line">                <span class="keyword">try</span>&#123;</span><br><span class="line">                    <span class="comment">//使用Apache文件上传组件处理文件上传步骤：</span></span><br><span class="line">                    <span class="comment">//1、创建一个DiskFileItemFactory工厂</span></span><br><span class="line">                    DiskFileItemFactory factory = <span class="keyword">new</span> DiskFileItemFactory();</span><br><span class="line">                    <span class="comment">//2、创建一个文件上传解析器</span></span><br><span class="line">                    ServletFileUpload upload = <span class="keyword">new</span> ServletFileUpload(factory);</span><br><span class="line">                     <span class="comment">//解决上传文件名的中文乱码</span></span><br><span class="line">                    upload.setHeaderEncoding(<span class="string">"UTF-8"</span>);</span><br><span class="line">                    <span class="comment">//3、判断提交上来的数据是否是上传表单的数据</span></span><br><span class="line">                    <span class="keyword">if</span>(!ServletFileUpload.isMultipartContent(request))&#123;</span><br><span class="line">                        <span class="comment">//按照传统方式获取数据</span></span><br><span class="line">                        <span class="keyword">return</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="comment">//4、使用ServletFileUpload解析器解析上传数据，解析结果返回的是一个List&lt;FileItem&gt;集合，每一个FileItem对应一个Form表单的输入项</span></span><br><span class="line">                    List&lt;FileItem&gt; list = upload.parseRequest(request);</span><br><span class="line">                    <span class="keyword">for</span>(FileItem item : list)&#123;</span><br><span class="line">                        <span class="comment">//如果fileitem中封装的是普通输入项的数据</span></span><br><span class="line">                        <span class="keyword">if</span>(item.isFormField())&#123;</span><br><span class="line">                            String name = item.getFieldName();</span><br><span class="line">                            <span class="comment">//解决普通输入项的数据的中文乱码问题</span></span><br><span class="line">                            String value = item.getString(<span class="string">"UTF-8"</span>);</span><br><span class="line">                            <span class="comment">//value = new String(value.getBytes("iso8859-1"),"UTF-8");</span></span><br><span class="line">                            System.out.println(name + <span class="string">"="</span> + value);</span><br><span class="line">                        &#125;<span class="keyword">else</span>&#123;<span class="comment">//如果fileitem中封装的是上传文件</span></span><br><span class="line">                            <span class="comment">//得到上传的文件名称，</span></span><br><span class="line">                            String filename = item.getName();</span><br><span class="line">                            System.out.println(filename);</span><br><span class="line">                            <span class="keyword">if</span>(filename==<span class="keyword">null</span> || filename.trim().equals(<span class="string">""</span>))&#123;</span><br><span class="line">                                <span class="keyword">continue</span>;</span><br><span class="line">                            &#125;</span><br><span class="line">                            <span class="comment">//注意：不同的浏览器提交的文件名是不一样的，有些浏览器提交上来的文件名是带有路径的，如：  c:\a\b\1.txt，而有些只是单纯的文件名，如：1.txt</span></span><br><span class="line">                            <span class="comment">//处理获取到的上传文件的文件名的路径部分，只保留文件名部分</span></span><br><span class="line">                            filename = filename.substring(filename.lastIndexOf(<span class="string">"\\"</span>)+<span class="number">1</span>);</span><br><span class="line">                            <span class="comment">//获取item中的上传文件的输入流</span></span><br><span class="line">                            InputStream in = item.getInputStream();</span><br><span class="line">                            <span class="comment">//创建一个文件输出流</span></span><br><span class="line">                            FileOutputStream out = <span class="keyword">new</span> FileOutputStream(savePath + <span class="string">"\\"</span> + filename);</span><br><span class="line">                            <span class="comment">//创建一个缓冲区</span></span><br><span class="line">                            <span class="keyword">byte</span> buffer[] = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">1024</span>];</span><br><span class="line">                            <span class="comment">//判断输入流中的数据是否已经读完的标识</span></span><br><span class="line">                            <span class="keyword">int</span> len = <span class="number">0</span>;</span><br><span class="line">                            <span class="comment">//循环将输入流读入到缓冲区当中，(len=in.read(buffer))&gt;0就表示in里面还有数据</span></span><br><span class="line">                            <span class="keyword">while</span>((len=in.read(buffer))&gt;<span class="number">0</span>)&#123;</span><br><span class="line">                                <span class="comment">//使用FileOutputStream输出流将缓冲区的数据写入到指定的目录(savePath + "\\" + filename)当中</span></span><br><span class="line">                                out.write(buffer, <span class="number">0</span>, len);</span><br><span class="line">                            &#125;</span><br><span class="line">                            <span class="comment">//关闭输入流</span></span><br><span class="line">                            in.close();</span><br><span class="line">                            <span class="comment">//关闭输出流</span></span><br><span class="line">                            out.close();</span><br><span class="line">                            <span class="comment">//删除处理文件上传时生成的临时文件</span></span><br><span class="line">                            item.delete();</span><br><span class="line">                            message = <span class="string">"文件上传成功！"</span>;</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;<span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">                    message= <span class="string">"文件上传失败！"</span>;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line"></span><br><span class="line">                &#125;</span><br><span class="line">                request.setAttribute(<span class="string">"message"</span>,message);</span><br><span class="line">                request.getRequestDispatcher(<span class="string">"/message.jsp"</span>).forward(request, response);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span></span></span><br><span class="line"><span class="function">            <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line"></span><br><span class="line">        doGet(request, response);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



</div><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined">Lean</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="http://yoursite.com/2020/07/05/javaWeb%E5%AD%A6%E4%B9%A0/">http://yoursite.com/2020/07/05/javaWeb%E5%AD%A6%E4%B9%A0/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://yoursite.com" target="_blank">LeanBlog</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"></div><div class="post_share"><div class="social-share" data-image="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css"/><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js"></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2020/07/05/Mybatis%E5%AE%98%E6%96%B9%E6%96%87%E6%A1%A3/"><img class="prev-cover" data-src="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg" onerror="onerror=null;src='/img/404.jpg'"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">Mybatis官方文档</div></div></a></div><div class="next-post pull-right"><a href="/2020/07/02/Vue-Sample/"><img class="next-cover" data-src="/img/cover4.jpg" onerror="onerror=null;src='/img/404.jpg'"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">Vue Sample</div></div></a></div></nav></article></main><footer id="footer" data-type="color"><div id="footer-wrap"><div class="copyright">&copy;2020 By Lean</div><div class="framework-info"><span>驱动 </span><a href="https://hexo.io" target="_blank" rel="noopener"><span>Hexo</span></a><span class="footer-separator">|</span><span>主题 </span><a href="https://github.com/jerryc127/hexo-theme-butterfly" target="_blank" rel="noopener"><span>Butterfly</span></a></div></div></footer></div><section class="rightside" id="rightside"><div id="rightside-config-hide"><button id="readmode" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="font_plus" title="放大字体"><i class="fas fa-plus"></i></button><button id="font_minus" title="缩小字体"><i class="fas fa-minus"></i></button><button class="translate_chn_to_cht" id="translateLink" title="简繁转换">简</button><button id="darkmode" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button></div><div id="rightside-config-show"><button id="rightside_config" title="设置"><i class="fas fa-cog"></i></button><button class="close" id="mobile-toc-button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></section><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page/instantpage.min.js" type="module" defer></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload/dist/lazyload.iife.min.js" async></script></body></html>